"use strict";var express=require("express"),connection=require("../connection"),router=express.Router(),auth=require("../services/authentication"),checkRole=require("../services/checkRole");router.post("/add",auth.authenticateToken,checkRole.checkRole,function(e,o){var t=e.body;connection.query("insert into product (name,categoryId,description,price,status) values(?,?,?,?,'true')",[t.name,t.categoryId,t.description,t.price],function(e,t){return e?o.status(500).json(e):o.status(200).json({message:"Product added successfully"})})}),router.get("/get",auth.authenticateToken,function(e,o,t){connection.query("select p.id,p.name,p.description,p.price,p.status,c.id as categoryId,c.name as categoryName from product as p INNER JOIN category as c where p.categoryId=c.id",function(e,t){return e?o.status(500).json(e):o.status(200).json(t)})}),router.get("/getByCategory/:id",auth.authenticateToken,function(e,o,t){var s=e.params.id;connection.query("select id,name from product where categoryId=? and status='true'",[s],function(e,t){return e?o.status(500).json(e):o.status(200).json(t)})}),router.get("/getById/:id",auth.authenticateToken,function(e,o,t){var s=e.params.id;connection.query("select id,name,description,price from product where id=?",[s],function(e,t){return e?o.status(500).json(e):o.status(200).json(t[0])})}),router.patch("/update",auth.authenticateToken,checkRole.checkRole,function(e,o,t){var s=e.body;connection.query("update product set name=?,categoryId=?,description=?,price=? where id=?",[s.name,s.categoryId,s.description,s.price,s.id],function(e,t){return e?o.status(500).json(e):0==t.affectedRows?o.status(404).json({message:"Product id does not found"}):o.status(200).json({message:"Product Updated Successfully"})})}),router.delete("/delete/:id",auth.authenticateToken,checkRole.checkRole,function(e,o,t){var s=e.params.id;connection.query("delete from product where id=?",[s],function(e,t){return e?o.status(500).json(e):0==t.affectedRows?o.status(404).json({message:"Product id does not found"}):o.status(200).json({message:"Product Deleted Successfully"})})}),router.patch("/updateStatus",auth.authenticateToken,checkRole.checkRole,function(e,o,t){var s=e.body;connection.query("update product set status=? where id=?",[s.status,s.id],function(e,t){return e?o.status(500).json(e):0==t.affectedRows?o.status(404).json({message:"Product id does not found"}):o.status(200).json({message:"Product Status Updated Successfully"})})}),module.exports=router;
//# sourceMappingURL=product.min.js.map
